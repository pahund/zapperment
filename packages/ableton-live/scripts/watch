#!/bin/bash

BASEDIR=$(dirname "$0")

DIRECTORY_TO_OBSERVE="${BASEDIR}/../src"

function block_for_change {
  fswatch --one-event ${DIRECTORY_TO_OBSERVE}
  sleep 1
}

echo "Waiting for source code changes…"
while block_for_change; do
  sleep 1
  ${BASEDIR}/clean
  ${BASEDIR}/compile
  ${BASEDIR}/deploy
  echo "Waiting for source code changes…"
done
